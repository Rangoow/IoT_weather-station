(this.webpackJsonpmeteo=this.webpackJsonpmeteo||[]).push([[0],{124:function(e,t,a){e.exports=a(246)},129:function(e,t,a){},245:function(e,t,a){},246:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(8),o=a.n(r),l=(a(129),a(13)),c=a(10),d=a(16),s=a(17),p=a(18),u=a(5),h=a(280),m=a(281),f=a(282),y=a(247),b=a(31),g=a.n(b),v=a(248),O=a(274),C=a(291),j=a(278),E=a(279),w=a(106),k=a.n(w),A=a(107),N=function(e,t,a){return{labels:e,datasets:[{label:"Temp\xe9ratures",borderColor:"#f96332",pointBorderColor:"#FFF",pointBackgroundColor:"#f96332",pointBorderWidth:2,pointHoverRadius:4,pointHoverBorderWidth:1,pointRadius:4,fill:!0,borderWidth:2,data:t},{label:"Humidit\xe9",borderColor:"#14ad2b",pointBorderColor:"#FFF",pointBackgroundColor:"#14ad2b",pointBorderWidth:2,pointHoverRadius:4,pointHoverBorderWidth:1,pointRadius:4,fill:!0,borderWidth:2,data:a}]}},B={maintainAspectRatio:!1,legend:{display:!1},tooltips:{bodySpacing:4,mode:"nearest",intersect:0,position:"nearest",xPadding:10,yPadding:10,caretPadding:10},responsive:1,scales:{yAxes:[{ticks:{display:!0,padding:15},gridLines:{zeroLineColor:"transparent",drawTicks:!1,display:!1,drawBorder:!1}}],xAxes:[{display:1,ticks:{display:!0,padding:15},gridLines:{zeroLineColor:"transparent",drawTicks:!1,display:!1,drawBorder:!1}}]},layout:{padding:{left:10,right:10,top:15,bottom:15}}},_=i.a.forwardRef((function(e,t){return i.a.createElement(O.a,Object.assign({direction:"down",ref:t},e))})),x=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).state={name:void 0,temps:[]},a.handleNamechange=function(e){a.setState({name:e.target.value})},a.handleCancel=function(){a.setState({name:void 0}),a.props.handleClose()},a.handleAddCity=function(e){e.preventDefault();var t={id:k()(),city:a.state.name,temp:15,humidity:12};a.props.addCity(t),a.handleCancel()},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.openw||g.a.get("http://api.thingspeak.com/channels/997472/feeds.json?&results=100&api_key=CBO5J9VCE5IQ5EA3").then((function(t){e.setState({dates:t.data.feeds.map((function(e){return e.created_at})),temps:t.data.feeds.map((function(e){return e.field1})),humidities:t.data.feeds.map((function(e){return e.field2}))})}))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.open,n=e.handleClose,r=e.cityName,o=e.openw,l=this.state,c=l.dates,d=l.temps,s=l.humidities;return i.a.createElement(C.a,{open:a,TransitionComponent:_,keepMounted:!0,onClose:n,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",maxWidth:"xl",fullWidth:!o},i.a.createElement(j.a,{id:"alert-dialog-slide-title"},r),i.a.createElement(E.a,{className:t.modal},o?"Affichage de l'historique impossible car la fonctionnalit\xe9 est payante sur l'api openweather":i.a.createElement(A.a,{data:N(c,d,s),options:B,className:t.graph})))}}]),t}(n.Component),S=Object(v.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},graph:{height:400}}}))(x),T=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).state={temp:void 0,humidity:void 0,id:void 0,detailOpen:!1},a.handleClick=function(){a.setState({detailOpen:!a.state.detailOpen})},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.city;t.openWeather?g.a.get("http://api.openweathermap.org/data/2.5/weather?q="+t.cityName+"&units=metric&lang=fr&appid=a28aa797e78814860d441a08242c554b").then((function(t){e.setState({temp:t.data.main.temp,humidity:t.data.main.humidity,id:t.data.id})})):g.a.get("http://api.thingspeak.com/channels/997472/feeds.json?api_key=CBO5J9VCE5IQ5EA3&results=1").then((function(t){e.setState({temp:t.data.feeds[0].field1,humidity:t.data.feeds[0].field2})}))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.city,n=this.state,r=n.temp,o=n.humidity,l=n.detailOpen;return i.a.createElement("div",null,i.a.createElement(h.a,{className:t.root,variant:"outlined"},i.a.createElement(m.a,{onClick:this.handleClick},i.a.createElement(f.a,null,i.a.createElement(y.a,{className:t.title,color:"textSecondary",gutterBottom:!0},a.cityName),i.a.createElement(y.a,{variant:"h5",component:"h2"},"Temp\xe9rature : ",r,"\xb0C"),i.a.createElement(y.a,{variant:"body2",component:"p"},"Humidit\xe9: ",o,"%")))),i.a.createElement(S,{open:l,handleClose:this.handleClick,cityName:a.cityName,openw:a.openWeather}))}}]),t}(n.Component),W=Object(v.a)({root:{minWidth:250,maxWidth:300,margin:20,backgroundColor:"#2e2e2e"},title:{fontSize:24}})(T),D=a(287),I=a(285),R=a(286),F=a(284),L=a(113),H=a.n(L),M=a(289),V=a(283),G=a(39),J=i.a.forwardRef((function(e,t){return i.a.createElement(O.a,Object.assign({direction:"down",ref:t},e))})),X=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).state={name:void 0},a.handleNamechange=function(e){a.setState({name:e.target.value})},a.handleCancel=function(){a.setState({name:void 0}),a.props.handleClose()},a.handleAddCity=function(e){e.preventDefault();var t={name:a.state.name,openweather:!0};a.props.addCity(t),a.handleCancel()},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.open,n=e.handleClose,r=this.state.name;return i.a.createElement(C.a,{open:a,TransitionComponent:J,keepMounted:!0,onClose:n,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},i.a.createElement(j.a,{id:"alert-dialog-slide-title"},"Ajouter une ville"),i.a.createElement(E.a,null,i.a.createElement(M.a,{autoFocus:!0,id:"name",label:"Ville",className:t.formItems,defaultValue:r,onChange:this.handleNamechange})),i.a.createElement(V.a,null,i.a.createElement(F.a,{onClick:this.handleCancel,color:"secondary"},"Annuler"),i.a.createElement(F.a,{onClick:this.handleAddCity,color:"primary"},"Ajouter")))}}]),t}(n.Component),Y=Object(G.b)((function(e){return{city:e.city}}),{addCity:function(e){return function(t){g.a.post("api/",{cityName:e.name,openWeather:e.openweather}).then((function(e){t({type:"ADD_CITY",payload:e.data})}))}}})(Object(v.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}))(X)),z=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).state={addOpen:!1},a.handleAddButton=function(){a.setState({addOpen:!a.state.addOpen})},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.state.addOpen;return i.a.createElement("div",{className:e.root},i.a.createElement(I.a,{position:"static"},i.a.createElement(R.a,null,i.a.createElement(y.a,{variant:"h6",noWrap:!0,style:{flex:1}},"La M\xe9t\xe9o"),i.a.createElement(F.a,{className:e.addButton,variant:"contained",color:"secondary",startIcon:i.a.createElement(H.a,null),onClick:this.handleAddButton},"Ajouter"))),i.a.createElement(Y,{open:t,handleClose:this.handleAddButton}))}}]),t}(n.Component),P=Object(v.a)({root:{flexGrow:1},title:{flexGrow:1},addButton:{right:0}})(z),q=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).state={open:!1},a.toggleDrawer=function(){a.setState({open:!a.state.open})},a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.getCities()}},{key:"render",value:function(){var e=this.props.classes,t=this.props.city.cities;return i.a.createElement("div",null,i.a.createElement(P,null),i.a.createElement(D.a,{container:!0,direction:"row",justify:"center",alignItems:"center",className:e.cards},t.map((function(e){return i.a.createElement(W,{city:e,key:e._id})}))))}}]),t}(n.Component),Q=Object(G.b)((function(e){return{city:e.city}}),{getCities:function(){return function(e){g.a.get("api/").then((function(t){return e({type:"GET_CITY",payload:t.data})}))}}})(Object(u.a)({root:{display:"flex"},cards:{paddingTop:70}})(q)),U=(a(245),a(115)),$=a(288),K=a(117),Z=Object(U.a)({palette:{type:"dark",primary:{light:"#63ccff",main:"#009be5",dark:"#006db3"}}}),ee=function(e){function t(){return Object(l.a)(this,t),Object(d.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props.classes;return i.a.createElement($.a,{theme:Z},i.a.createElement(K.a,{className:e.paper},i.a.createElement(Q,null)))}}]),t}(n.Component),te=Object(v.a)({paper:{top:0,height:"100vh"}})(ee);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ae=a(28),ne=a(114),ie=a(23),re=a(71),oe={cities:[]},le=Object(ae.c)({city:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CITY":return Object(re.a)({},e,{cities:t.payload});case"ADD_CITY":return Object(re.a)({},e,{cities:[t.payload].concat(Object(ie.a)(e.cities))});default:return e}}}),ce=[ne.a],de=Object(ae.e)(le,{},window.__REDUX_DEVTOOLS_EXTENSION__?Object(ae.d)(ae.a.apply(void 0,ce),window.__REDUX_DEVTOOLS_EXTENSION__()):ae.a.apply(void 0,ce));o.a.render(i.a.createElement(G.a,{store:de},i.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[124,1,2]]]);
//# sourceMappingURL=main.7e01e539.chunk.js.map